---
title: "第５回目"
author: "22MM349：中野渡駿"
date: "2022/4/26"
output: 
  html_document:
    toc: yes
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# chapter 1
## Rは遅い
Rもpythonも遅いので裏ではCやJavaなどが動いていたりする．
Rcppというものも存在する．

## インタラクティブな地図生成の例
```{r leaflet map example}
library(leaflet)
popup = c("Robin", "Jakub", "Jannes")
leaflet() %>%
  addProviderTiles("NASAGIBS.ViirsEarthAtNight2012") %>%
  addMarkers(lng = c(-3, 23, 11),
             lat = c(52, 53, 49), 
             popup = popup)
```
数行だけでもインタラクティブな地図を生成可能
addProviderTilesの引数の部分にはたとえば
http://leaflet-extras.github.io/leaflet-providers/preview/
から様々な地図を選択できる．


## packages
tidyverse sp sf

# chapter 2
##vector and raster
座標(ベクトル)をもとにして情報を処理するのはベクター
座標を1つ指定するとpoint,2つ指定するとlinestring,3つ以上指定するとpolygonを表現することができる．
```{r}
#st_point(c(4,2))
multipoint_matrix = rbind(c(5, 2), c(1, 3), c(3, 4), c(3, 2)) #rbindでは行を追加していく
multi_point <- st_multipoint(multipoint_matrix)

multipoint_matrix
class(multi_point)
multi_point
```


対して，画像として処理するのはラスター
したがって，ラスターでは1つ1つのピクセルに色をつけているのが特徴．
Rasterには3つのclassが存在しており，RasterRayerでは1つのレイヤーを使用しているのに対して，RasterBrickとRasterStackでは複数のレイヤーを使用可能である．

```{r raster}
#load data
raster_filepath = system.file("raster/srtm.tif", package = "spDataLarge")
new_raster = raster(raster_filepath)
new_raster
plot(new_raster)

multi_raster_file = system.file("raster/landsat.tif", package = "spDataLarge")
multi_raster_file
r_brick = brick(multi_raster_file)
r_brick
plot(r_brick)
```

# 座標系
地図を描くには座標系を決定する必要がある．

座標系は，Bounding boxを見てその値の範囲を見るとわかる．あるいはCRSのESPGのところを見ると使用している座標系を見ることができる．
直交座標系ではメートル単位で扱われる．

# 電磁波の観測
土，水，植物などは反射特性が異なるため，電磁波等の観測において各衛星はそれらを利用して画像を生成することが可能になっている．
たとえば，RGBを組み合わせると可視光色における衛星写真を作成できる．
他にも，植物の活性状態を知る上で，近赤外のデータと赤色のデータを用いて観測・表現することができる．